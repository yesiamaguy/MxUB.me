// Elements
const settingsBtn = document.getElementById("settingsBtn");
const settingsPanel = document.getElementById("settingsPanel");
const closeSettings = document.getElementById("closeSettings");
const themeSelect = document.getElementById("themeSelect");
const themeBtn = document.getElementById("themeBtn");

const homeScreen = document.getElementById("homeScreen");
const contentPanel = document.getElementById("contentPanel");
const contentArea = document.getElementById("contentArea");
const backBtn = document.getElementById("backBtn");

// Themes
const themes = ["light", "dark", "neon"];
let currentTheme = localStorage.getItem("theme") || "neon";

document.body.className = currentTheme;
themeSelect.value = currentTheme;

// Settings panel toggle
settingsBtn.addEventListener("click", () => {
    settingsPanel.classList.toggle("open");
});
closeSettings.addEventListener("click", () => {
    settingsPanel.classList.remove("open");
});

// Theme dropdown
themeSelect.addEventListener("change", () => {
    setTheme(themeSelect.value);
});

// Theme button cycles
themeBtn.addEventListener("click", () => {
    let i = themes.indexOf(currentTheme);
    i = (i + 1) % themes.length;
    setTheme(themes[i]);
    themeSelect.value = currentTheme;
});

// Save + Apply theme
function setTheme(t) {
    currentTheme = t;
    document.body.className = t;
    localStorage.setItem("theme", t);
}

// OPEN A SECTION AS AN EMBEDDED PAGE
function openSection(section) {
    homeScreen.style.display = "none";
    contentPanel.style.display = "block";

    let src = "";

    if (section === "games") {
        src = "https://now.gg"; // example
    }
    if (section === "apps") {
        src = "https://www.photopea.com/";
    }
    if (section === "tools") {
        src = "https://www.dcode.fr/";
    }
    if (section === "proxy") {
        src = "https://google.com";  // placeholder
    }

    contentArea.innerHTML = `<iframe src="${src}"></iframe>`;
}

// BACK BUTTON
backBtn.addEventListener("click", () => {
    contentPanel.style.display = "none";
    homeScreen.style.display = "block";
});
